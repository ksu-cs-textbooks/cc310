




  
	
	  

  
	
	  

  
	
	  

  
	
		
	  

  
	
		
		
	  

  
	
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="YouTube Video 1function REVERSE2() 2 read CHARACTER 3 if CHARACTER == `*` then 4 return 5 else 6 print CHARACTER 7 REVERSE2() 8 return 9 end if 10end function The REVERSE2 function in the previous quiz actually prints the characters entered by the user in the same order in which they are typed. Notice how this small variation in the instruction order significantly changed the outcome of the function. To get a better understanding of why this occurs, we will delve into the order of execution in a little more depth.">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Implementing Recursion :: CC 310 Textbook">
    <meta name="twitter:description" content="YouTube Video 1function REVERSE2() 2 read CHARACTER 3 if CHARACTER == `*` then 4 return 5 else 6 print CHARACTER 7 REVERSE2() 8 return 9 end if 10end function The REVERSE2 function in the previous quiz actually prints the characters entered by the user in the same order in which they are typed. Notice how this small variation in the instruction order significantly changed the outcome of the function. To get a better understanding of why this occurs, we will delve into the order of execution in a little more depth.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc310/05-recursion/03-implementing/">
    <meta property="og:site_name" content="CC 310 Textbook">
    <meta property="og:title" content="Implementing Recursion :: CC 310 Textbook">
    <meta property="og:description" content="YouTube Video 1function REVERSE2() 2 read CHARACTER 3 if CHARACTER == `*` then 4 return 5 else 6 print CHARACTER 7 REVERSE2() 8 return 9 end if 10end function The REVERSE2 function in the previous quiz actually prints the characters entered by the user in the same order in which they are typed. Notice how this small variation in the instruction order significantly changed the outcome of the function. To get a better understanding of why this occurs, we will delve into the order of execution in a little more depth.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Recursion">
    <meta property="article:modified_time" content="2024-06-29T14:21:25-05:00">
    <meta itemprop="name" content="Implementing Recursion :: CC 310 Textbook">
    <meta itemprop="description" content="YouTube Video 1function REVERSE2() 2 read CHARACTER 3 if CHARACTER == `*` then 4 return 5 else 6 print CHARACTER 7 REVERSE2() 8 return 9 end if 10end function The REVERSE2 function in the previous quiz actually prints the characters entered by the user in the same order in which they are typed. Notice how this small variation in the instruction order significantly changed the outcome of the function. To get a better understanding of why this occurs, we will delve into the order of execution in a little more depth.">
    <meta itemprop="dateModified" content="2024-06-29T14:21:25-05:00">
    <meta itemprop="wordCount" content="1510">
    <title>Implementing Recursion :: CC 310 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc310/05-recursion/03-implementing/" rel="canonical" type="text/html" title="Implementing Recursion :: CC 310 Textbook">
    <link href="/cc310/05-recursion/03-implementing/index.xml" rel="alternate" type="application/rss+xml" title="Implementing Recursion :: CC 310 Textbook">
    <link href="/cc310/05-recursion/03-implementing/tele.html" rel="alternate" type="text/html" title="Implementing Recursion :: CC 310 Textbook">
    <link href="/cc310/05-recursion/03-implementing/embed.html" rel="alternate" type="text/html" title="Implementing Recursion :: CC 310 Textbook">
    <link href="/cc310/css/fontawesome-all.min.css?1719877279" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc310/css/fontawesome-all.min.css?1719877279" rel="stylesheet"></noscript>
    <link href="/cc310/css/nucleus.css?1719877279" rel="stylesheet">
    <link href="/cc310/css/auto-complete.css?1719877279" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc310/css/auto-complete.css?1719877279" rel="stylesheet"></noscript>
    <link href="/cc310/css/perfect-scrollbar.min.css?1719877279" rel="stylesheet">
    <link href="/cc310/css/fonts.css?1719877279" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc310/css/fonts.css?1719877279" rel="stylesheet"></noscript>
    <link href="/cc310/css/theme.css?1719877279" rel="stylesheet">
    <link href="/cc310/css/theme-auto.css?1719877279" rel="stylesheet" id="R-variant-style">
    <link href="/cc310/css/chroma-auto.css?1719877279" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/cc310/css/variant.css?1719877279" rel="stylesheet">
    <link href="/cc310/css/print.css?1719877279" rel="stylesheet" media="print">
    <link href="/cc310/css/format-print.css?1719877279" rel="stylesheet">
    <script src="/cc310/js/variant.js?1719877279"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc310';
      window.index_js_url="/cc310/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    
    <link href="/cc310/css/custom.css?1719877279" rel="stylesheet">
  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="/cc310/05-recursion/03-implementing/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/cc310/05-recursion/"><span itemprop="name">Recursion</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Implementing Recursion</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cc310/05-recursion/02-string-example/" title="Example: Reversing a String (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cc310/05-recursion/04-factorial-example/" title="Example: Factorials (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="implementing-recursion">Implementing Recursion</h1>


<a href="https://www.youtube.com/watch?v=CwAAKKRSWI0">YouTube Video</a>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="n">function</span> <span class="n">REVERSE2</span><span class="p">()</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="n">read</span> <span class="n">CHARACTER</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="k">if</span> <span class="n">CHARACTER</span> <span class="o">==</span> <span class="err">`</span><span class="o">*</span><span class="err">`</span> <span class="n">then</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">        <span class="nb">print</span> <span class="n">CHARACTER</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">        <span class="n">REVERSE2</span><span class="p">()</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="n">end</span> <span class="k">if</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="n">end</span> <span class="n">function</span></span></span></code></pre></div>
<p>The <code>REVERSE2</code> function in the previous quiz actually prints the characters entered by the user in the same order in which they are typed. Notice how this small variation in the instruction order significantly changed the outcome of the function. To get a better understanding of why this occurs, we will delve into the order of execution in a little more depth.</p>
<h2 id="head-and-tail-recursion">Head and Tail Recursion</h2>
<p>From the output of our original <code>REVERSE</code> function, we could argue that recursive function calls are carried out in a LIFO (last in, first out) order. Conversely, the output of the second version of the function <code>REVERSE2</code>, would lead us to believe that recursive function calls are carried out in FIFO (first in, first out) order. However, the ordering of the output is really based on how we structure our code within the recursive function itself, not the order of execution of the recursive functions.</p>
<p>To produce a LIFO ordering, we use a method called <em>head recursion</em>, which causes the function to make a recursive call first, then calculates the results once the recursive call returns. To produce a FIFO ordering, we use a method called <em>tail recursion</em>, which is when the function makes all of its necessary calculations before making a recursive call. With the <code>REVERSE</code> and <code>REVERSE2</code> functions, this is simply a matter of swapping lines 6 and 7.</p>
<p>While some functions require the use of either head or tail recursion, many times we have the choice of which one to use. The choice is not necessarily just a matter of style, as we shall see next.</p>
<h2 id="tracing-program-execution">Tracing Program Execution</h2>
<p>Before we finish our discussion of head and tail recursion, we need to make sure we understand how a recursive function actually works in the computer. To do this, we will use a new example. Let&rsquo;s assume we want to print all numbers from 0 to $N$, where $N$ is provided as a parameter. A recursive solution to this problem is shown below.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="n">function</span> <span class="n">OUTPUT</span><span class="p">(</span><span class="n">integer</span> <span class="n">N</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="k">if</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span> <span class="n">then</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">        <span class="nb">print</span> <span class="n">N</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">        <span class="nb">print</span> <span class="s2">&#34;Calling to OUTPUT &#34;</span> <span class="n">N</span><span class="o">-</span><span class="mi">1</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">        <span class="n">OUTPUT</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">        <span class="nb">print</span> <span class="s2">&#34;Returning from OUTPUT &#34;</span> <span class="n">N</span><span class="o">-</span><span class="mi">1</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="nb">print</span> <span class="n">N</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="n">end</span> <span class="k">if</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="n">end</span> <span class="n">function</span></span></span></code></pre></div>
<p>Notice that we have added some extra <code>print</code> statements (lines 5 and 7) to the function just to help us keep track of when we have called <code>OUTPUT</code> and when that call has returned. This function is very similar to the <code>REVERSE</code> function above, we just don&rsquo;t have to worry about reading a character each time the function runs. Now, if we call <code>OUTPUT</code> with an initial parameter of <code>3</code>, we get the following output. We&rsquo;ve also marked these lines with letters to make the following discussion simpler.</p>
<div class="highlight"><pre tabindex="0"><code>Calling to OUTPUT 2         (a)
Calling to OUTPUT 1         (b)
Calling to OUTPUT 0         (c)
0                           (d)
Returning from OUTPUT 0     (e)
1                           (f)
Returning from OUTPUT 1     (g)
2                           (h)
Returning from OUTPUT 2     (i)
3                           (j)</code></pre></div><p>Lines a, b, and c show how the function makes all the recursive calls before any output or computation is performed. Thus, this is an example of head recursion which produces a LIFO ordering.</p>
<p>Once we get to the call of <code>OUTPUT(0)</code>, the function prints out <code>0</code> (line d) and we start the return process. When we return from the call to <code>OUTPUT(0)</code> we immediately print out <code>N</code>, which is <code>1</code> and return. We continue this return process from lines g through j and eventually return from the original call to <code>OUTPUT</code> having completed the task.</p>
<h2 id="looking-under-the-covers">Looking Under the Covers</h2>
<p>Now that we have seen how recursion works in practice, we will pull back the covers and take a quick look at what is going on underneath. To be able to call the same function over and over, we need to be able to store the appropriate data related to each function call to ensure we can treat it as a unique instance of the function. While we do not make copies of the code, we do need to make copies of other data. Specifically, when function <code>A</code> calls function <code>B</code>, we must save the following information:</p>
<ul>
<li>the memory address of the current parameters,</li>
<li>the address of the statement in function <code>A</code> to be executed when <code>B</code> returns (called the <em>return address</em>),</li>
<li>the address of the memory location that will contain the value returned by the function (the <em>value address</em>), and</li>
<li>all the local variables of function <code>B</code>.</li>
</ul>
<p>We call this information the <em>activation record</em> for function <code>A</code>. When a call to <code>B</code> is made, this information is stored in a stack data structure known as the <em>activation stack</em>, and execution begins at the first instruction in function <code>B</code>. Upon completion of function <code>B</code>, the following steps are performed.</p>
<ol>
<li>The return address is read from the activation stack.</li>
<li>The information stored about function B is removed from the activation stack, leaving the information stored for function A on top of the stack.</li>
<li>Execution begins at the return address in function A.</li>
</ol>
<p>Next, we will look at how we use the activation stack to implement recursion. For this we will use a simple <code>MAIN</code> program that calls our simplified <code>OUTPUT</code> function (where we have removed all the print statements used to track our progress).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="n">function</span> <span class="n">MAIN</span><span class="p">()</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="n">OUTPUT</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nb">print</span> <span class="p">(</span><span class="s2">&#34;Done&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="n">end</span> <span class="n">function</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">
</span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="n">function</span> <span class="n">OUTPUT</span><span class="p">(</span><span class="n">integer</span> <span class="n">N</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">    <span class="k">if</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span> <span class="n">then</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="nb">print</span> <span class="n">N</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">        <span class="n">OUTPUT</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">        <span class="nb">print</span> <span class="n">N</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">    <span class="n">end</span> <span class="k">if</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="n">end</span> <span class="n">function</span></span></span></code></pre></div>
<p>When we run <code>MAIN</code>, the only record on the activation stack is the record for <code>MAIN</code>. Since it has not been &ldquo;called&rdquo; from another function, it does not contain a return address. It also has no local variables, so the record is basically empty as shown below.</p>
<p><a href="#R-image-405c134d8c7b3ca57a269ffce1cae70f" class="lightbox-link"><img alt="Main Activation Record" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.mainstack.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-405c134d8c7b3ca57a269ffce1cae70f"><img alt="Main Activation Record" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.mainstack.png"></a></p>
<p>However, when we execute line 2 in <code>MAIN</code>, we call the function <code>OUTPUT</code> with a parameter of <code>3</code>. This causes the creation of a new function activation record with the return address of line 3 in the calling <code>MAIN</code> function and a parameter for <code>N</code>, which is <code>3</code>. Again, there are no local variables in <code>OUTPUT</code>. The stack activation is shown in figure <strong>a</strong> below.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>a</strong></th>
<th style="text-align:center"><strong>b</strong></th>
<th style="text-align:center"><strong>c</strong></th>
<th style="text-align:center"><strong>d</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="#R-image-fec2dc51ac61a2ad02eb0b6f0e546e7c" class="lightbox-link"><img alt="Activation Stack 1" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.stack1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fec2dc51ac61a2ad02eb0b6f0e546e7c"><img alt="Activation Stack 1" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.stack1.png"></a></td>
<td style="text-align:center"><a href="#R-image-8eb669b62f839099f9a9a69985bac2d9" class="lightbox-link"><img alt="Activation Stack 2" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.stack2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8eb669b62f839099f9a9a69985bac2d9"><img alt="Activation Stack 2" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.stack2.png"></a></td>
<td style="text-align:center"><a href="#R-image-068be31b5c9b70d7f8c6ef7297c3807c" class="lightbox-link"><img alt="Activation Stack 3" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.stack3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-068be31b5c9b70d7f8c6ef7297c3807c"><img alt="Activation Stack 3" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.stack3.png"></a></td>
<td style="text-align:center"><a href="#R-image-5a9f96123d54d9cd086e21c6694f3231" class="lightbox-link"><img alt="Activation Stack 4" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.stack4.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5a9f96123d54d9cd086e21c6694f3231"><img alt="Activation Stack 4" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.stack4.png"></a></td>
</tr>
</tbody>
</table>
<p>Following the execution for <code>OUTPUT</code>, we will eventually make our recursive call to <code>OUTPUT</code> in line 10, which creates a new activation record on the stack as shown above in <strong>b</strong>. This time, the return address will be line 11 and the parameter <code>N</code> is <code>2</code>.</p>
<p>Execution of the second instance of <code>OUTPUT</code> will follow the first instance, eventually resulting in another recursive call to <code>OUTPUT</code> and a new activation record as shown in <strong>c</strong> above. Here the return address is again <code>5</code> but now the value of parameter <code>N</code> is <code>1</code>.  Execution of the third instance of <code>OUTPUT</code> yields similar results, giving us another activation record on the stack <strong>d</strong> with the value of parameter <code>N</code> being <code>0</code>.</p>
<p>Finally, the execution of the fourth instance of <code>OUTPUT</code> will reach our base case of <code>N == 0</code>. Here we will <code>write 0</code> in line 8 and then <code>return</code>. This return will cause us to start execution back in the third instance of <code>OUTPUT</code> at the line indicated by the return value, or in this case, 11. The stack activation will now look like <strong>e</strong> in the figure below.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>e</strong></th>
<th style="text-align:center"><strong>f</strong></th>
<th style="text-align:center"><strong>g</strong></th>
<th style="text-align:center"><strong>h</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="#R-image-07c2b0c7c9525cc6d584f55a8be3b2b5" class="lightbox-link"><img alt="Activation Stack 3" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.stack3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-07c2b0c7c9525cc6d584f55a8be3b2b5"><img alt="Activation Stack 3" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.stack3.png"></a></td>
<td style="text-align:center"><a href="#R-image-d32881d60c3867670fabe0bc8144298c" class="lightbox-link"><img alt="Activation Stack 2" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.stack2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d32881d60c3867670fabe0bc8144298c"><img alt="Activation Stack 2" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.stack2.png"></a></td>
<td style="text-align:center"><a href="#R-image-82eb97718cc8b8c7f4c4bdbfcd4b7621" class="lightbox-link"><img alt="Activation Stack 1" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.stack1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-82eb97718cc8b8c7f4c4bdbfcd4b7621"><img alt="Activation Stack 1" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.stack1.png"></a></td>
<td style="text-align:center"><a href="#R-image-63677c6cdadb13c65d07f1bed995a1da" class="lightbox-link"><img alt="Main Activation Record" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cc310/images/6/6.4.mainstack.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-63677c6cdadb13c65d07f1bed995a1da"><img alt="Main Activation Record" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cc310/images/6/6.4.mainstack.png"></a></td>
</tr>
</tbody>
</table>
<p>When execution begins in the third instance of <code>OUTPUT</code> at line 11, we again write the current value of <code>N</code>, which is <code>1</code>, and we then <code>return</code>. We follow this same process, returning to the second instance of <code>OUTPUT</code>, then the first instance of <code>OUTPUT</code>. Once the initial instance of <code>OUTPUT</code> completes, it returns to line 3 in <code>MAIN</code>, where the <code>print(&quot;Done&quot;)</code> statement is executed and <code>MAIN</code> ends.</p>
<h2 id="performance">Performance</h2>
<p>While recursion is a very powerful technique, its expressive power has an associated cost in terms of both time and space. Anytime we call a function, a certain amount of memory space is needed to store information on the activation stack. In addition, the process of calling a function takes extra time since we must store parameter values and the return address, etc. before restarting execution. In the general case, a recursive function will take more time and more memory than a similar function computed using loops.</p>
<h2 id="recursion-versus-iteration">Recursion Versus Iteration</h2>
<p>It is possible to demonstrate that any function with a recursive structure can be transformed into an iterative function that uses loops and vice versa. It is also important to know how to use both mechanisms because there are advantages and disadvantages for both iterative and recursive solutions. While we&rsquo;ve discussed the fact that loops are typically faster and take less memory than similar recursive solutions, it is also true that recursive solutions are generally more elegant and easier to understand. Recursive functions can also allow us to find solutions to problems that are complex to write using loops.</p>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>

        </div>
      </main>
    
<div class="git-footer">
  <p class="theme-version-footer">6.0.0</p>
  <p>Last modified by: 
              <i class='fas fa-user'></i> Russell Feldhausen
              <i class='fas fa-calendar'></i> <a href="https://github.com/ksu-cs-textbooks/cc310/commit/05c48f27a6bd3fa923b5f7511c2110a0ab3257a7">Jun 29, 2024</a>
  </p>
  </div>
  
    
    </div>
    <script src="/cc310/js/clipboard.min.js?1719877279" defer></script>
    <script src="/cc310/js/perfect-scrollbar.min.js?1719877279" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="/cc310/js/mathjax/tex-mml-chtml.js?1719877279"></script>
    <script src="/cc310/js/theme.js?1719877279" defer></script>
  </body>
</html>
